<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŽ± Sinuca - Teste Simples</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            background: #000000 !important;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        
        #game-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000000;
            position: relative;
        }
        
        #game-canvas {
            border: 2px solid #333;
            background: #0a4d0a;
            border-radius: 10px;
        }
        
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .game-info {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 18px;
            z-index: 1000;
        }
        
        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            text-align: center;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="loading">
        <div class="spinner"></div>
        <div>ðŸŽ± Carregando Sinuca...</div>
    </div>
    
    <div id="game-container">
        <div class="game-info">
            <div>ðŸŽ± Sinuca - 8 Ball</div>
            <div>Jogador vs IA</div>
        </div>
        
        <canvas id="game-canvas" width="800" height="600"></canvas>
        
        <div class="controls">
            <div>Clique e arraste para mirar</div>
            <div>Solte para atirar</div>
        </div>
    </div>

    <script>
        // SimulaÃ§Ã£o simples de sinuca
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        
        // ConfiguraÃ§Ãµes do jogo
        const game = {
            width: canvas.width,
            height: canvas.height,
            balls: [],
            cueBall: null,
            isDragging: false,
            dragStart: null,
            dragEnd: null
        };
        
        // Classe para bolas
        class Ball {
            constructor(x, y, radius, color, number = null) {
                this.x = x;
                this.y = y;
                this.radius = radius;
                this.color = color;
                this.number = number;
                this.vx = 0;
                this.vy = 0;
                this.active = true;
            }
            
            draw() {
                if (!this.active) return;
                
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                if (this.number) {
                    ctx.fillStyle = '#fff';
                    ctx.font = 'bold 16px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(this.number.toString(), this.x, this.y);
                }
            }
            
            update() {
                if (!this.active) return;
                
                this.x += this.vx;
                this.y += this.vy;
                
                // FricÃ§Ã£o
                this.vx *= 0.98;
                this.vy *= 0.98;
                
                // Parar quando muito lento
                if (Math.abs(this.vx) < 0.1) this.vx = 0;
                if (Math.abs(this.vy) < 0.1) this.vy = 0;
                
                // Bordas da mesa
                if (this.x - this.radius < 50) {
                    this.x = 50 + this.radius;
                    this.vx = -this.vx * 0.8;
                }
                if (this.x + this.radius > game.width - 50) {
                    this.x = game.width - 50 - this.radius;
                    this.vx = -this.vx * 0.8;
                }
                if (this.y - this.radius < 50) {
                    this.y = 50 + this.radius;
                    this.vy = -this.vy * 0.8;
                }
                if (this.y + this.radius > game.height - 50) {
                    this.y = game.height - 50 - this.radius;
                    this.vy = -this.vy * 0.8;
                }
            }
        }
        
        // Inicializar jogo
        function initGame() {
            // Mesa
            ctx.fillStyle = '#0a4d0a';
            ctx.fillRect(0, 0, game.width, game.height);
            
            // Bordas da mesa
            ctx.strokeStyle = '#8B4513';
            ctx.lineWidth = 20;
            ctx.strokeRect(10, 10, game.width - 20, game.height - 20);
            
            // Bola branca (taco)
            game.cueBall = new Ball(200, game.height / 2, 15, '#fff');
            game.balls.push(game.cueBall);
            
            // Bolas coloridas
            const colors = ['#ff0000', '#0000ff', '#ffff00', '#00ff00', '#ff00ff', '#00ffff', '#ff8000', '#8000ff'];
            for (let i = 0; i < 8; i++) {
                const angle = (i * Math.PI * 2) / 8;
                const x = 400 + Math.cos(angle) * 100;
                const y = game.height / 2 + Math.sin(angle) * 100;
                game.balls.push(new Ball(x, y, 15, colors[i], i + 1));
            }
            
            // Bola 8 (preta)
            game.balls.push(new Ball(500, game.height / 2, 15, '#000', 8));
        }
        
        // Desenhar linha de mira
        function drawAimLine() {
            if (!game.isDragging || !game.dragStart || !game.dragEnd) return;
            
            ctx.beginPath();
            ctx.moveTo(game.dragStart.x, game.dragStart.y);
            ctx.lineTo(game.dragEnd.x, game.dragEnd.y);
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 3;
            ctx.setLineDash([5, 5]);
            ctx.stroke();
            ctx.setLineDash([]);
        }
        
        // Loop principal do jogo
        function gameLoop() {
            // Limpar canvas
            ctx.fillStyle = '#0a4d0a';
            ctx.fillRect(0, 0, game.width, game.height);
            
            // Desenhar bordas
            ctx.strokeStyle = '#8B4513';
            ctx.lineWidth = 20;
            ctx.strokeRect(10, 10, game.width - 20, game.height - 20);
            
            // Atualizar e desenhar bolas
            game.balls.forEach(ball => {
                ball.update();
                ball.draw();
            });
            
            // Desenhar linha de mira
            drawAimLine();
            
            requestAnimationFrame(gameLoop);
        }
        
        // Eventos do mouse
        canvas.addEventListener('mousedown', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // Verificar se clicou na bola branca
            const dx = x - game.cueBall.x;
            const dy = y - game.cueBall.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < game.cueBall.radius) {
                game.isDragging = true;
                game.dragStart = { x: game.cueBall.x, y: game.cueBall.y };
            }
        });
        
        canvas.addEventListener('mousemove', (e) => {
            if (!game.isDragging) return;
            
            const rect = canvas.getBoundingClientRect();
            game.dragEnd = {
                x: e.clientX - rect.left,
                y: e.clientY - rect.top
            };
        });
        
        canvas.addEventListener('mouseup', (e) => {
            if (!game.isDragging) return;
            
            game.isDragging = false;
            
            if (game.dragStart && game.dragEnd) {
                // Calcular forÃ§a
                const dx = game.dragStart.x - game.dragEnd.x;
                const dy = game.dragStart.y - game.dragEnd.y;
                const force = Math.min(Math.sqrt(dx * dx + dy * dy) / 10, 20);
                
                // Aplicar forÃ§a Ã  bola branca
                game.cueBall.vx = (dx / Math.sqrt(dx * dx + dy * dy)) * force;
                game.cueBall.vy = (dy / Math.sqrt(dx * dx + dy * dy)) * force;
            }
            
            game.dragStart = null;
            game.dragEnd = null;
        });
        
        // Inicializar quando carregar
        window.addEventListener('load', () => {
            // Esconder loading
            document.getElementById('loading').style.display = 'none';
            
            // Inicializar jogo
            initGame();
            
            // Iniciar loop
            gameLoop();
            
            console.log('ðŸŽ± Jogo de sinuca iniciado!');
        });
    </script>
</body>
</html>
